+++
# --- Basic Metadata (Required for Manager Squad Orchestration Rule) ---
id = "MDP-RULE-SQUAD-ORCH-V1" # MDP for Manager-Data-Product
title = "Manager Data Product: Rule - Data Product Squad Orchestration & MDTM Sub-Task Management"
context_type = "rules" # Fixed for rule documents
scope = "Defines the procedure for the 'Manager Data Product' (manager-data-product) mode to orchestrate its specialist 'data-product-*' squad using MDTM sub-tasks to design a Data Product PoC."
target_audience = ["manager-data-product"] # Applies exclusively to this mode
granularity = "procedure"
status = "active"
last_updated = "{{YYYYMMDD}}" # Placeholder for date of last update
version = "1.0" # Initial version of this rule document
tags = ["rules", "mode-specific", "manager-data-product", "manager", "squad-orchestration", "mdtm", "workflow", "data-product-design"]
related_context = [
    ".roo/commander/modes/manager-data-product/manager-data-product.mode.md",
    ".roo/commander/modes/manager-data-product/kb/procedures/01-main-orchestration-flow.md", # Critical KB procedure
    ".roo/commander/modes/manager-data-product/kb/reference/00-dp-squad-composition.md", # Squad definition
    ".roo/rules/02-mdtm-task-standard.md", # Workspace MDTM standard
    ".roo/commander/templates/tasks/template_00_mdtm_task_generic.md" # Generic task template it uses
]
template_schema_doc = ".roo/commander/templates/rules/template_01_manager_squad_orchestration_rule.README.md"

# --- Rule Specific Fields (Optional) ---
enforcement_level = "critical"
rationale_summary = "Ensures consistent and effective MDTM-based orchestration of the Data Product design squad by the Manager Data Product mode, leading to a comprehensive PoC plan."
primary_input_source = "MDTM Task from roo-commander detailing the Data Product PoC goal."
primary_output_goal = "A completed primary MDTM task with the 'output_artifacts' field pointing to the final 'data_product_poc_plan.md' generated by the squad."
+++

# Manager Data Product: Rule - Data Product Squad Orchestration & MDTM Sub-Task Management

## 1. Objective

To define the standard procedure that the **`manager-data-product`** mode **MUST** follow to:
*   Interpret its primary assigned MDTM task (typically outlining a Data Product PoC design goal received from `roo-commander`).
*   Plan and sequence the necessary design phases for its specialist `data-product-*` squad members.
*   Create, delegate, and monitor MDTM sub-tasks for each `data-product-*` squad member.
*   Manage the flow of design artifacts (e.g., strategy document, personas, data schema) between squad members.
*   Ensure its primary MDTM task is updated with overall progress and the final `data_product_poc_plan.md`.
*   Report completion or critical issues back to `roo-commander`.

## 2. Scope & Applicability

*   **Scope:** This rule governs the core orchestration logic of `manager-data-product` as it pertains to managing the Data Product Design PoC lifecycle through its designated squad.
*   **Applies To:** This rule applies exclusively to the `manager-data-product` mode.

## 3. Orchestration Procedure

1.  **Ingest & Plan Primary MDTM Task:**
    *   Thoroughly read and understand your assigned primary MDTM task from `roo-commander`. Note its `id`, `title`, `description`, `acceptance_criteria`, any `input_artifacts` (e.g., initial user ideas, session ID), and the target `[ProductName]` if specified.
    *   Consult your KB:
        *   `kb/procedures/01-main-orchestration-flow.md`: This is your primary guide for the sequence of squad activities.
        *   `kb/reference/00-dp-squad-composition.md`: To confirm squad members and their roles/outputs.
    *   Update the checklist in your *own* primary MDTM task to reflect the high-level phases of the Data Product PoC design flow (e.g., "- [ ] Phase 1: Strategy Definition (Delegate to `data-product-strategist`)", "- [ ] Phase 2: Ideation (Delegate to `data-product-ideator`)", etc., up to PoC Documentation).

2.  **Iterative Squad Sub-Task Delegation (Following `kb/procedures/01-main-orchestration-flow.md`):**
    *   For each design phase in the sequence (Strategy, Ideation, Personas, Data Simulation, Interface Design, PoC Documentation):
        1.  **Identify Squad Member:** Determine the correct `data-product-*` squad member slug for the current phase (e.g., `data-product-strategist` for strategy).
        2.  **Determine Sub-Task Details:**
            *   `[SubTask_ID] = TASK-[SquadMemberPrefix]-[Timestamp]` (e.g., `TASK-DPSTRAT-[Timestamp]`).
            *   `[SubTask_Path] = .roo/commander/tasks/manager-data-product/[SubTask_ID].md`.
            *   `title`: Specific objective for this phase (e.g., "Define Product Strategy for [ProductName] PoC").
            *   `type`: `"ðŸ“Š DataProductDesignPhase"`.
            *   `input_artifacts`: Path(s) to output artifact(s) from the *previous* squad member's completed sub-task (if applicable). For the first task (`data-product-strategist`), inputs might come from your primary MDTM task or be general session context.
            *   `output_artifacts` (target): Define the expected primary output artifact name (e.g., `product_strategy.md`) and its target location within the active session's `artifacts/design_outputs/[ProductName]/` directory.
            *   `description`, `acceptance_criteria`, `checklist`: Provide detailed instructions tailored to the squad member and the design phase, referencing the overall PoC goal and session ID.
        3.  **Create & Save Sub-Task:** Create the MDTM sub-task file at `[SubTask_Path]` using `template_00_mdtm_task_generic.md`, populating all fields. Set `coordinator` to `manager-data-product` and `parent_task_id` to your primary MDTM task ID.
        4.  **Log Sub-Task Creation:** Log the creation and path of this sub-task in the "Log Entries" section of your *own* primary MDTM task file.
        5.  **Delegate Sub-Task:** Use `new_task` to assign `[SubTask_Path]` to the identified squad member.
        6.  **Monitor Sub-Task:** Await completion (squad member updates its MDTM task to "ðŸŸ¢ Done" and reports back).
        7.  **Process Sub-Task Completion:**
            *   Verify the squad member's MDTM sub-task is "ðŸŸ¢ Done" and its `output_artifacts` field correctly lists the path to their created design document.
            *   Log the completion and the output artifact path in your primary MDTM task file.
            *   Mark the corresponding phase in your primary MDTM task's checklist as complete.
            *   The output artifact from this completed sub-task becomes the input for the *next* squad member in the sequence.

3.  **Manage Artifact Flow for Data Product Design:**
    *   Systematically ensure the output design document from one `data-product-*` squad member (e.g., `product_strategy.md` from `data-product-strategist`) is correctly passed as an input to the next (e.g., to `data-product-ideator`). This is managed via the `input_artifacts` and `output_artifacts` fields in the MDTM sub-tasks.

4.  **Handle Squad Member Issues:**
    *   If a `data-product-*` squad member reports "ðŸ”´ Error" or "âšª Blocked" on their sub-task:
        *   Analyze the issue based on their MDTM task log.
        *   Attempt to resolve by providing clarification or minor scope adjustments.
        *   If unresolvable, update your primary MDTM task status to "âšª Blocked" or "ðŸ”´ Error" and report the situation, including the problematic sub-task ID and squad member, to your coordinator (`roo-commander`).

5.  **Update & Complete Primary MDTM Task:**
    *   Once `data-product-poc-documenter` (the final squad member) completes its sub-task and produces the `data_product_poc_plan.md`:
        *   Ensure the path to this final `data_product_poc_plan.md` is listed in the `output_artifacts` of your primary MDTM task.
        *   Update the `status` of your primary MDTM task to "ðŸŸ¢ Done".
        *   Update `updated_date`.
        *   Add a final summary to your primary MDTM task's log, confirming all design phases are complete and the PoC plan is available.
    *   Report completion of your primary MDTM task to `roo-commander`.

## 4. Rationale

*   This rule provides a clear, repeatable procedure for `manager-data-product` to orchestrate the complex, multi-phase Data Product PoC design workflow.
*   It ensures all design work is tracked via MDTM at both the Manager (overall PoC) and Squad Member (specific design phase) levels.
*   It standardizes the creation of MDTM sub-tasks and the management of artifact flow between specialist design modes.
*   It relies on the Manager's KB (`procedures/01-main-orchestration-flow.md`) for the specific sequence and details of the Data Product Design lifecycle.

**This rule is the operational blueprint for how `manager-data-product` fulfills its primary responsibility of delivering a complete Data Product PoC Plan through its specialist squad.**